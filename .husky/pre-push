#!/usr/bin/env sh
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸš€ Running pre-push QA checks..."
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

# Step 1: Format check
echo "ğŸ“‹ Step 1/4: Checking code formatting..."
if ! npm run format:check > /dev/null 2>&1; then
  echo "âŒ Format check failed. Run 'npm run format' to fix."
  exit 1
fi
echo "âœ… Code formatting is correct"
echo ""

# Step 2: Lint check
echo "ğŸ“‹ Step 2/4: Checking code quality (ESLint)..."
if ! npm run lint > /dev/null 2>&1; then
  echo "âŒ Lint check failed. Run 'npm run lint:fix' to fix."
  exit 1
fi
echo "âœ… Code quality checks passed"
echo ""

# Step 3: Type check
echo "ğŸ“‹ Step 3/4: Type checking (TypeScript)..."
if ! npm run type-check > /dev/null 2>&1; then
  echo "âŒ Type check failed. Fix TypeScript errors."
  exit 1
fi
echo "âœ… Type checking passed"
echo ""

# Step 4: Tests
echo "ğŸ“‹ Step 4/4: Running tests..."
if ! npm run test > /dev/null 2>&1; then
  echo "âŒ Tests failed. Fix test failures."
  exit 1
fi
echo "âœ… All tests passed"
echo ""

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ… All pre-push checks passed! Proceeding with push..."
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
