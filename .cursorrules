# Cursor Rules - Best Practices for AI Agents

## Pre-Deployment Requirements

**⚠️ CRITICAL: Always run QA checks before committing or deploying changes**

### Before Committing Code

1. **Run pre-deployment check**:
   ```bash
   npm run pre-deploy-check
   ```
   OR
   ```bash
   just qa
   ```

2. **If checks fail**, fix issues before committing:
   - Format: `npm run format`
   - Lint: `npm run lint:fix`
   - Types: Fix TypeScript errors
   - Tests: Fix failing tests

3. **Never commit with `--no-verify`** unless explicitly requested by user

### Before Pushing to Remote

1. **Ensure all checks pass**:
   ```bash
   npm run pre-deploy-check
   ```

2. **Pre-push hook will automatically run** (for feature branches)
   - Format check
   - Lint check
   - Type check
   - Test suite

3. **If hook fails**, fix issues before pushing

### Before Deploying to Staging/Production

1. **Run full pre-deployment check**:
   ```bash
   npm run pre-deploy-check
   ```
   OR
   ```bash
   just pre-deploy
   ```

2. **Verify GitHub Actions will pass**:
   - All checks must pass locally first
   - Format, lint, types, tests, and build must succeed

### Automated Checks (Already Configured)

- **Pre-commit hook**: Formats and lints staged files automatically
- **Pre-push hook**: Runs full QA checks before pushing (feature branches)
- **GitHub Actions**: Runs on PRs and pushes to main/staging/develop

### Commands Reference

```bash
# Quick QA check (auto-fixes formatting and linting)
just qa
npm run qa

# Full pre-deployment check (includes build)
just pre-deploy
npm run pre-deploy

# Comprehensive interactive check
npm run pre-deploy-check

# Individual checks
npm run format:check    # Check formatting
npm run lint            # Check linting
npm run type-check      # Check types
npm run test:coverage   # Run tests
npm run build           # Build for production
```

### Best Practices

1. ✅ Always run `npm run pre-deploy-check` before deploying
2. ✅ Let git hooks catch issues early
3. ✅ Fix issues locally before pushing
4. ✅ Never skip hooks unless user explicitly requests it
5. ✅ Review GitHub Actions results before merging
6. ✅ Keep code formatted (Prettier runs automatically)
7. ✅ Follow TypeScript best practices

### Documentation

See `CLAUDE.md` → "Pre-Deployment Best Practices & Quality Assurance" section for detailed instructions.

